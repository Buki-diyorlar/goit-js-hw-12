{"version":3,"file":"index.js","sources":["../src/js/app.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = \"48286639-c5b13cd121e9f124dcf0b461d\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nlet lightbox;\nlet pageNum = 1;\nlet searchQuery = \"\";\nlet totalImages = 0;\nconst imagesPerPage = 40;\n\nconst gallery = document.querySelector('.gallery');\nconst searchForm = document.querySelector('.searchForm');\nconst loaderOverlay = document.getElementById('loaderOverlay');\nconst loader = document.getElementById('loader');\nconst loadBtnContainer = document.querySelector('.load-btn-container');\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.classList.add('load-btn');\nloadBtnContainer.appendChild(loadMoreBtn);\n\nfunction showLoader() {\n  loaderOverlay.classList.add('active');\n  loader.classList.remove('loader-hidden');\n}\n\nfunction hideLoader() {\n  loaderOverlay.classList.remove('active');\n  loader.classList.add('loader-hidden');\n}\n\nfunction hideLoadBtn() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction showLoadBtn() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction scrollPage() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (!galleryItem) return;\n  \n  const cardHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth'\n  });\n}\n\nasync function getImages(query, page) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    per_page: imagesPerPage,\n    page: page\n  });\n\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n\nfunction displayImages(images) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => \n    `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n          title=\"${tags}\"\n        />\n        <ul class=\"img-information\">\n          <li>\n            <span class=\"img-information-title\">Likes</span>\n            <span class=\"img-information-content\">${likes}</span>\n          </li>\n          <li>\n            <span class=\"img-information-title\">View</span>\n            <span class=\"img-information-content\">${views}</span>\n          </li>\n          <li>\n            <span class=\"img-information-title\">Comments</span>\n            <span class=\"img-information-content\">${comments}</span>\n          </li>\n          <li>\n            <span class=\"img-information-title\">Downloads</span>\n            <span class=\"img-information-content\">${downloads}</span>\n          </li>\n        </ul>\n      </a>\n    </li>`\n  ).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  \n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionSelector: 'img',\n      captionType: 'attr',\n      captionsData: 'title',\n      captionPosition: 'bottom',\n      captionDelay: 250,\n      closeText: 'Ã—',\n      navText: ['&larr;', '&rarr;'],\n      overlayOpacity: 0.9,\n      spinner: true,\n      alertError: false\n    });\n  }\n}\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  showLoader();\n  hideLoadBtn();\n  \n  const searchInput = document.querySelector('.search-input');\n  const query = searchInput.value.trim();\n  \n  if (!query) {\n    hideLoader();\n    iziToast.warning({\n      message: \"Please enter a search term\",\n      position: \"topRight\"\n    });\n    return;\n  }\n\n  gallery.innerHTML = '';\n  searchQuery = query;\n  pageNum = 1;\n\n  try {\n    const data = await getImages(searchQuery, pageNum);\n    totalImages = data.totalHits;\n    \n    if (data.hits.length === 0) {\n      iziToast.warning({\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\"\n      });\n      return;\n    }\n    \n    displayImages(data.hits);\n    \n    if (data.totalHits > imagesPerPage) {\n      showLoadBtn();\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight'\n    });\n  } finally {\n    hideLoader();\n    searchForm.reset();\n  }\n}\n\nasync function onLoadMoreClick() {\n  showLoader();\n  pageNum++;\n  \n  try {\n    const data = await getImages(searchQuery, pageNum);\n    displayImages(data.hits);\n    \n    if (pageNum * imagesPerPage >= totalImages) {\n      hideLoadBtn();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight'\n      });\n    }\n    \n    scrollPage();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Something went wrong: ${error.message}`,\n      position: 'topRight'\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nsearchForm.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\nhideLoadBtn();"],"names":["API_KEY","BASE_URL","lightbox","pageNum","searchQuery","totalImages","imagesPerPage","gallery","searchForm","loaderOverlay","loader","loadBtnContainer","loadMoreBtn","showLoader","hideLoader","hideLoadBtn","showLoadBtn","scrollPage","galleryItem","cardHeight","getImages","query","page","params","axios","error","displayImages","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","onFormSubmit","e","iziToast","data","onLoadMoreClick"],"mappings":"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"}